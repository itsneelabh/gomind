# =============================================================================
# Research Agent with Resilience - Environment Configuration
# =============================================================================
# Copy this file to .env and configure your settings:
#   cp .env.example .env
#
# This agent demonstrates RESILIENCE PATTERNS:
#   - Circuit breaker (prevents cascade failures)
#   - Automatic retries with exponential backoff
#   - Graceful degradation when services fail
#
# AI Client: Single Client with auto-detection
# =============================================================================

# =============================================================================
# AI Provider API Keys (Auto-Detection)
# =============================================================================
# The framework automatically detects which provider to use.
# Only ONE key is required.
#
# Detection priority: OpenAI -> Groq -> Anthropic -> Gemini

# OpenAI (RECOMMENDED)
# Get your key: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic (Claude models)
# Get your key: https://console.anthropic.com/
#ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Groq (Ultra-fast inference)
# Get your key: https://console.groq.com/keys
# Free tier: 14,000 tokens/minute
#GROQ_API_KEY=gsk-your-groq-key-here

# Google Gemini
# Get your key: https://aistudio.google.com/apikey
#GEMINI_API_KEY=your-gemini-key-here

# =============================================================================
# Model Alias Overrides (Optional)
# =============================================================================
# Override which model is used without changing code.
# Pattern: GOMIND_{PROVIDER}_MODEL_{ALIAS}=actual-model-name

#GOMIND_OPENAI_MODEL_DEFAULT=gpt-4o-mini
#GOMIND_OPENAI_MODEL_SMART=gpt-4o
#GOMIND_ANTHROPIC_MODEL_DEFAULT=claude-3-haiku-20240307
#GOMIND_GROQ_MODEL_DEFAULT=llama-3.1-8b-instant

# =============================================================================
# Service Configuration
# =============================================================================

# Redis URL for service discovery (required)
REDIS_URL=redis://localhost:6379

# HTTP server port
PORT=8093

# Development mode - enables verbose logging
DEV_MODE=false

# =============================================================================
# Circuit Breaker Configuration (Key Feature)
# =============================================================================
# These are INFORMATIONAL - the framework provides sensible defaults.
# The resilience module's DefaultConfig() provides:
#
#   ErrorThreshold:   0.5   # 50% error rate opens circuit
#   VolumeThreshold:  10    # Minimum requests before evaluation
#   SleepWindow:      30s   # Wait time before half-open state
#   HalfOpenRequests: 5     # Test requests in half-open
#   SuccessThreshold: 0.6   # 60% success rate to close circuit
#   WindowSize:       60s   # Sliding window for metrics
#
# Circuit States:
#   CLOSED: Normal operation, requests pass through
#   OPEN: Too many failures, requests fail fast
#   HALF-OPEN: Testing if service recovered

# =============================================================================
# Retry Configuration (Key Feature)
# =============================================================================
# The framework's DefaultRetryConfig() provides:
#
#   MaxAttempts:   3      # Total attempts (1 initial + 2 retries)
#   InitialDelay:  100ms  # First retry delay
#   MaxDelay:      5s     # Maximum retry delay
#   BackoffFactor: 2.0    # Exponential backoff multiplier
#   JitterEnabled: true   # Add randomness to prevent thundering herd
#
# Retry Timeline Example:
#   Attempt 1: Immediate
#   Attempt 2: ~100ms later (+ jitter)
#   Attempt 3: ~200ms later (+ jitter)

# =============================================================================
# Logging Configuration (Optional)
# =============================================================================
# GOMIND_LOG_LEVEL: debug, info, warn, error
#GOMIND_LOG_LEVEL=info

# =============================================================================
# Testing Resilience
# =============================================================================
# To test circuit breaker behavior:
#   1. Deploy with a tool that fails intermittently
#   2. Send multiple requests rapidly
#   3. Watch logs for circuit state transitions:
#      - "circuit breaker opened" (too many failures)
#      - "circuit breaker half-open" (testing recovery)
#      - "circuit breaker closed" (service recovered)
# =============================================================================
